<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "calen">
	<resultMap type="calen" id="calMap">
		<result property="start" column="start1"/>
		<result property="end" column="end1"/>
	</resultMap>
	<select id="calenList" resultMap="calMap">
		SELECT id, title,
		DATE_FORMAT(start1, '%Y-%m-%d %H:%i:%s') start1,
		DATE_FORMAT(end1, '%Y-%m-%d %H:%i:%s') end1,
		ALLDAY,
		TEXTCOLOR,
		BACKGROUNDCOLOR,
		BORDERCOLOR 
		FROM csworktools.calendar
	</select>
	<insert id="input" parameterType="calen" >
		insert into csworktools.calendar (title, start1, end1, allDay, textColor, backgroundColor, borderColor) 
		values(#{title}, DATE_FORMAT(#{start1}, '%Y-%m-%d %H:%i:%s'), DATE_FORMAT(#{end1}, '%Y-%m-%d %H:%i:%s'), 1, 'yellow', 'navy', 'navy')
	</insert>
	
	<select id="calenselect" resultMap="calMap">
	select count(*) from csworktools.calendar where DATE_FORMAT(start1, '%Y-%m-%d') = DATE_FORMAT(#{start1}, '%Y-%m-%d')
	
	</select>
</mapper>